<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Product Search Filter</title>
<style>
  body{font-family:system-ui,Segoe UI,Roboto,Arial;background:#f8fafc;margin:28px}
  .wrap{max-width:1000px;margin:0 auto;background:#fff;padding:18px;border-radius:10px;box-shadow:0 8px 30px rgba(2,6,23,0.06)}
  .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:12px;margin-top:12px}
  .card{padding:12px;border-radius:8px;border:1px solid #eef2ff;background:#fbfdff}
  input{padding:8px;border-radius:8px;border:1px solid #e6eef8;width:100%;max-width:360px}
</style>
</head>
<body>
  <div class="wrap">
    <h2>Products</h2>
    <div style="display:flex;gap:8px;align-items:center">
      <input id="search" placeholder="Search products..." />
      <button id="load" style="padding:8px 12px;border-radius:8px;border:0;background:#2563eb;color:#fff">Load</button>
    </div>
    <div id="grid" class="grid"></div>
  </div>

<script>
  const search = document.getElementById('search')
  const grid = document.getElementById('grid')
  const loadBtn = document.getElementById('load')
  let products = []

  function render(list){
    grid.innerHTML = ''
    list.forEach(p=>{
      const n = document.createElement('div'); n.className='card'; n.innerHTML = `<div style="font-weight:700">${p.title}</div><div style="color:#6b7280">${p.price} $</div>`; grid.appendChild(n)
    })
  }

  function debounce(fn,delay=300){let t; return (...a)=>{clearTimeout(t); t=setTimeout(()=>fn(...a),delay)}}

  async function loadProducts(){
    grid.innerHTML = 'Loading...'
    try{
      const res = await fetch('https://fakestoreapi.com/products')
      if(!res.ok) throw new Error('network')
      products = await res.json()
      render(products)
    }catch(e){
      grid.innerHTML = '<div style="color:#ef4444">Failed to load products</div>'
    }
  }

  search.addEventListener('input', debounce((e)=>{
    const q = e.target.value.trim().toLowerCase()
    const filtered = products.filter(p=>p.title.toLowerCase().includes(q))
    render(filtered)
  },250))

  loadBtn.addEventListener('click', loadProducts)
  loadProducts()
</script>
</body>
</html>