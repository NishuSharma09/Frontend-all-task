<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Fetch Users</title>
<style>
  body{font-family:system-ui,Segoe UI,Roboto,Arial;background:#f8fafc;margin:28px}
  .wrap{max-width:900px;margin:0 auto;background:#fff;padding:18px;border-radius:10px;box-shadow:0 8px 30px rgba(2,6,23,0.06)}
  table{width:100%;border-collapse:collapse}
  th,td{padding:10px;border-bottom:1px solid #eef2ff;text-align:left}
  .btn{padding:8px 12px;border-radius:8px;border:0;background:#2563eb;color:#fff;cursor:pointer}
  .spinner{width:18px;height:18px;border-radius:50%;border:3px solid #eef2ff;border-top-color:#2563eb;animation:spin 1s linear infinite;display:inline-block;vertical-align:middle;margin-left:8px}
  @keyframes spin{to{transform:rotate(360deg)}}
</style>
</head>
<body>
  <div class="wrap">
    <h2>Users</h2>
    <div style="display:flex;gap:8px;align-items:center;margin-bottom:12px">
      <button id="refresh" class="btn">Refresh</button>
      <div id="loader" style="display:none"><span class="spinner"></span><span style="margin-left:8px;color:#6b7280">Loading...</span></div>
    </div>
    <table aria-label="Users table">
      <thead><tr><th>Name</th><th>Email</th><th>City</th></tr></thead>
      <tbody id="tbody"></tbody>
    </table>
  </div>

<script>
  const tbody = document.getElementById('tbody')
  const refresh = document.getElementById('refresh')
  const loader = document.getElementById('loader')

  async function fetchUsers(){
    loader.style.display = 'inline-block'
    tbody.innerHTML = ''
    try{
      const res = await fetch('https://jsonplaceholder.typicode.com/users')
      if(!res.ok) throw new Error('Network error')
      const data = await res.json()
      data.forEach(u=>{
        const tr = document.createElement('tr')
        tr.innerHTML = `<td>${u.name}</td><td>${u.email}</td><td>${u.address.city}</td>`
        tbody.appendChild(tr)
      })
    }catch(e){
      tbody.innerHTML = `<tr><td colspan="3" style="color:#ef4444">Failed to load users</td></tr>`
    }finally{
      loader.style.display = 'none'
    }
  }

  refresh.addEventListener('click', fetchUsers)
  fetchUsers()
</script>
</body>
</html>